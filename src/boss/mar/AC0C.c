#include "mar.h"

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018AC0C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018ACD4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018AE90);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018AFC4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B018);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B1DC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B238);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B2F0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B474);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B4A0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B74C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018B850);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018C90C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018CA94);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018CF70);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018CFA0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018D29C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018D3A4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018E4BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EB60);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EC24);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018ED3C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EE54);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EEA0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EEF8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018EFF4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F108);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F154);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F1AC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F2A8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F3BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F534);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F5E8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F65C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F6D8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8018F750);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190388);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801903F4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190470);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801904B8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190570);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190688);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801906C4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801906F8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019073C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019076C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190798);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190A10);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190BF8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190C58);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190C84);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190CA0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190D0C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190D44);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190D8C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190DD4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190E2C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190EB8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190EE8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190F20);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190F68);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190FC8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80190FE8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191004);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191098);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191194);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801911BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801912E4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019143C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191780);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191838);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801918BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191A18);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191A98);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191B74);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191C8C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191D30);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191D80);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80191DA8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019261C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80192718);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801927BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80192DA4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80193054);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80193B24);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80193C40);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019419C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019428C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019439C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801944CC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801945B4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801946A4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80194798);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801949C8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80194AC4);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195044);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195144);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195210);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801952D8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195390);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195568);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80195B48);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80196248);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80196440);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80196538);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80196708);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019738C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80197720);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80197BD0);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80197CBC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80197FEC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80198574);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80198688);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801988F8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80198944);

void func_80198C74(Entity* self) {
    u16 params = self->params;
    Primitive* prim;
    s16 primIndex;

    switch (self->step) {
    case 0:
        if (self->step_s == 0) {
            func_80191098(D_801803E4);
            self->animSet = ANIMSET_OVL(1);
            self->animCurFrame = 0x11;
            self->zPriority = 0x80;
            self->posX.i.hi += D_80181290[params];
            self->posY.i.hi -= 0x2C;
            self->step = 0;
            self->step_s++;
        }
        primIndex = g_api.AllocPrimitives(1, 1);
        if (primIndex == -1) {
            return;
        }
        self->primIndex = primIndex;
        self->flags |= FLAG_HAS_PRIMS;
        prim = &g_PrimBuf[primIndex];
        prim->r0 = prim->g0 = prim->b0 = 0;
        prim->x0 = self->posX.i.hi - 6;
        prim->y0 = self->posY.i.hi - 16;
        prim->u0 = 12;
        prim->v0 = 32;
        prim->priority = 0x7F;
        prim->blendMode = 0;
        self->step++;
        break;

    case 1:
        if (self->ext.generic.unk7E.modeU16 == self->step) {
            self->step = 2;
            self->animFrameIdx = self->animCurFrame - 17;
        }
        if (self->ext.generic.unk7E.modeU16 == 2) {
            self->step = 3;
            self->animFrameIdx = 20 - self->animCurFrame;
        }
        self->animFrameDuration = 0;
        break;

    case 2:
        func_801904B8(D_801812C4, self);
        if (self->ext.generic.unk7E.modeU16 == 0) {
            self->step = 1;
        }
        break;

    case 3:
        func_801904B8(D_801812D0, self);
        if (self->ext.generic.unk7E.modeU16 == 0) {
            self->step = 1;
        }
        break;
    }
}

void func_80198E84(s32 arg0) {
    s32 tilePos;
    s16 i, j;

    for (tilePos = 0xC4, i = 0; i < 2; i++) {
        for (j = 0; j < 8; j++) {
            if (arg0 != 0) {
                g_CurrentRoomTileLayout.fg[tilePos] = 0x597;
                tilePos++;
            } else {
                g_CurrentRoomTileLayout.fg[tilePos] = D_801812DC[j];
                tilePos++;
            }
        }
        tilePos += 8;
    }
}

void func_80198F24(Entity* self) {
    u16 params = self->params;

    switch (self->step) {
    case 0:
        func_80191098(D_801803E4);
        self->animSet = ANIMSET_OVL(1);
        self->animCurFrame = params + 0x1B;
        self->zPriority = 0x40;
        if (D_8003BDEC[0] == 0) {
            self->posX.i.hi += D_80181294[params];
            func_80198E84(1);
        } else {
            self->posX.i.hi += D_80181298[params];
            func_80198E84(0);
        }

        self->posY.i.hi = self->posY.i.hi + 0x58;
        self->ext.prim = D_8003BDEC[0];
        break;

    case 1:
        if (self->ext.prim == NULL) {
            if (D_8003BDEC[0]) {
                self->ext.generic.unk80.modeS16.unk0 = 0;
                self->step++;
            }
        }
        self->ext.prim = D_8003BDEC[0];
        break;

    case 2:
        if (!((u16)self->ext.generic.unk80.modeS16.unk0 & 31)) {
            func_80196440(0x607);
        }

        if ((++self->ext.generic.unk80.modeS16.unk0) & 1) {
            if (params != 0) {
                self->posX.i.hi++;
            } else {
                self->posX.i.hi--;
            }
            if ((u16)self->ext.generic.unk80.modeS16.unk0 & 1) {
                g_backbufferY = 1;
            } else {
                g_backbufferY = 0;
            }
        } else {
            g_backbufferY = 0;
        }
        if ((u16)self->ext.generic.unk80.modeS16.unk0 > 96) {
            func_80198E84(0);
            g_backbufferY = 0;
            self->step--;
        }
        break;
    }
}

void func_80199114(void) {}

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019911C);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199504);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199654);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199684);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199700);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199788);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_80199868);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801998BC);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_801998E8);

INCLUDE_ASM("asm/us/boss/mar/nonmatchings/AC0C", func_8019994C);
