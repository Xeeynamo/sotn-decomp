// SPDX-License-Identifier: AGPL-3.0-or-later
#include "../are/are.h"

#include "../pfn_entity_update.h"

extern LayoutEntity* D_8D2E3F0;
extern LayoutEntity* D_8D2E4C4;

extern Overlay OVL_EXPORT(Overlay);

s32 E_ID(BACKGROUND_BLOCK);
s32 E_ID(LOCK_CAMERA);
s32 E_ID(UNK_ID13);
s32 E_ID(EXPLOSION_VARIANTS);
s32 E_ID(GREY_PUFF);
s32 E_ID(BOSS_TORCH);
s32 E_ID(UNK_17);
s32 E_ID(BRIDGE_BACKGROUND_PIECE);
s32 E_ID(UNK_19);
s32 E_ID(ELEVATOR);
s32 E_ID(ELEVATOR_SWITCH);
s32 E_ID(ELEVATOR_GATES);
s32 E_ID(UNK_1D);
s32 E_ID(BREAKABLE_CEILING_SECRET);
s32 E_ID(BACKGROUND_DOOR_RUBBLE);
s32 E_ID(EXPLODE_PUFF_OPAQUE);
s32 E_ID(BREAKABLE_DEBRIS);
s32 E_ID(BLADE_MASTER);
s32 E_ID(BLADE_MASTER_ATTACK_HITBOX);
s32 E_ID(BLADE_MASTER_DEATH_PARTS);
s32 E_ID(BLADE_MASTER_DEATH_EXPLOSION);
s32 E_ID(BLADE_SOLDIER);
s32 E_ID(BLADE_SOLDIER_ATTACK_HITBOX);
s32 E_ID(BLADE_SOLDIER_DEATH_PARTS);
s32 E_ID(BONE_MUSKET);
s32 E_ID(BONE_MUSKET_UNK);
s32 E_ID(OWL_KNIGHT);
s32 E_ID(OWL);
s32 E_ID(OWL_KNIGHT_SWORD);
s32 E_ID(OWL_TARGET);
s32 E_ID(VALHALLA_KNIGHT);
s32 E_ID(VALHALLA_KNIGHT_UNK1);
s32 E_ID(VALHALLA_KNIGHT_UNK2);
s32 E_ID(AXE_KNIGHT_BLUE);
s32 E_ID(AXE_KNIGHT_AXE);
s32 E_ID(AXE_KNIGHT_AXE_2);
s32 E_ID(UNK_ENTITY);
s32 E_ID(ARMOR_LORD);
s32 E_ID(ARMOR_LORD_UNK1);
s32 E_ID(ARMOR_LORD_FIRE_WAVE);
s32 E_ID(ARMOR_LORD_UNK2);
s32 E_ID(HUNTING_GIRL);
s32 E_ID(HUNTING_GIRL_ATTACK);
s32 E_ID(PARANTHROPUS);
s32 E_ID(PARANTHROPUS_BONE_HITBOX);
s32 E_ID(PARANTHROPUS_SKULL);
s32 E_ID(PARANTHROPUS_THROWN_BONE);
s32 E_ID(FLEA_ARMOR);
s32 E_ID(FLEA_ARMOR_ATTACK_HITBOX);
s32 E_ID(FLEA_MAN);
s32 E_ID(BONE_SCIMITAR);
s32 E_ID(BONE_SCIMITAR_PARTS);
s32 E_ID(PLATE_LORD);
s32 E_ID(PLATE_LORD_UNK1);
s32 E_ID(PLATE_LORD_UNK2);
s32 E_ID(PLATE_LORD_UNK3);
s32 E_ID(PLATE_LORD_UNK4);
s32 E_ID(PLATE_LORD_UNK5);
s32 E_ID(GRAVE_KEEPER);
s32 E_ID(GRAVE_KEEPER_HITBOX);
s32 E_ID(MIST_DOOR);

void InitEntityIds(void) {
    E_ID(BACKGROUND_BLOCK) = 0x11;
    E_ID(LOCK_CAMERA) = 0x12;
    E_ID(UNK_ID13) = 0x13;
    E_ID(EXPLOSION_VARIANTS) = 0x14;
    E_ID(GREY_PUFF) = 0x15;
    E_ID(BOSS_TORCH) = 0x16;
    E_ID(UNK_17) = 0x17;
    E_ID(BRIDGE_BACKGROUND_PIECE) = 0x18;
    E_ID(UNK_19) = 0x19;
    E_ID(ELEVATOR) = 0x1A;
    E_ID(ELEVATOR_SWITCH) = 0x1B;
    E_ID(ELEVATOR_GATES) = 0x1C;
    E_ID(UNK_1D) = 0x1D;
    E_ID(BREAKABLE_CEILING_SECRET) = 0x1E;
    E_ID(BACKGROUND_DOOR_RUBBLE) = 0x1F;
    E_ID(EXPLODE_PUFF_OPAQUE) = 0x20;
    E_ID(BREAKABLE_DEBRIS) = 0x21;
    E_ID(BLADE_MASTER) = 0x22;
    E_ID(BLADE_MASTER_ATTACK_HITBOX) = 0x23;
    E_ID(BLADE_MASTER_DEATH_PARTS) = 0x24;
    E_ID(BLADE_MASTER_DEATH_EXPLOSION) = 0x25;
    E_ID(BLADE_SOLDIER) = 0x26;
    E_ID(BLADE_SOLDIER_ATTACK_HITBOX) = 0x27;
    E_ID(BLADE_SOLDIER_DEATH_PARTS) = 0x28;
    E_ID(BONE_MUSKET) = 0x29;
    E_ID(BONE_MUSKET_UNK) = 0x2A;
    E_ID(OWL_KNIGHT) = 0x2B;
    E_ID(OWL) = 0x2C;
    E_ID(OWL_KNIGHT_SWORD) = 0x2D;
    E_ID(OWL_TARGET) = 0x2E;
    E_ID(VALHALLA_KNIGHT) = 0x2F;
    E_ID(VALHALLA_KNIGHT_UNK1) = 0x30;
    E_ID(VALHALLA_KNIGHT_UNK2) = 0x31;
    E_ID(AXE_KNIGHT_BLUE) = 0x32;
    E_ID(AXE_KNIGHT_AXE) = 0x33;
    E_ID(AXE_KNIGHT_AXE_2) = 0x34;
    E_ID(UNK_ENTITY) = 0x35;
    E_ID(ARMOR_LORD) = 0x36;
    E_ID(ARMOR_LORD_UNK1) = 0x37;
    E_ID(ARMOR_LORD_FIRE_WAVE) = 0x38;
    E_ID(ARMOR_LORD_UNK2) = 0x39;
    E_ID(HUNTING_GIRL) = 0x3A;
    E_ID(HUNTING_GIRL_ATTACK) = 0x3B;
    E_ID(PARANTHROPUS) = 0x3C;
    E_ID(PARANTHROPUS_BONE_HITBOX) = 0x3D;
    E_ID(PARANTHROPUS_SKULL) = 0x3E;
    E_ID(PARANTHROPUS_THROWN_BONE) = 0x3F;
    E_ID(FLEA_ARMOR) = 0x40;
    E_ID(FLEA_ARMOR_ATTACK_HITBOX) = 0x41;
    E_ID(FLEA_MAN) = 0x42;
    E_ID(BONE_SCIMITAR) = 0x43;
    E_ID(BONE_SCIMITAR_PARTS) = 0x44;
    E_ID(PLATE_LORD) = 0x45;
    E_ID(PLATE_LORD_UNK1) = 0x46;
    E_ID(PLATE_LORD_UNK2) = 0x47;
    E_ID(PLATE_LORD_UNK3) = 0x48;
    E_ID(PLATE_LORD_UNK4) = 0x49;
    E_ID(PLATE_LORD_UNK5) = 0x4A;
    E_ID(GRAVE_KEEPER) = 0x4B;
    E_ID(GRAVE_KEEPER_HITBOX) = 0x4C;
    E_ID(MIST_DOOR) = 0x4D;
}

void OVL_EXPORT(Load)(void) {
    InitEntityIds();
    PfnEntityUpdates = OVL_EXPORT(EntityUpdates);
    g_pStObjLayoutHorizontal = &D_8D2E3F0;
    g_pStObjLayoutVertical = &D_8D2E4C4;
    func_892A018();
    memcpy(&g_api.o, &OVL_EXPORT(Overlay), sizeof(Overlay));
}
