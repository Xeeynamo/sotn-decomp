// SPDX-License-Identifier: AGPL-3.0-or-later
#include "nz1.h"
#include "../pfn_entity_update.h"

extern s32 E_ID(ALUCARD_WATER_EFFECT);
extern s32 E_ID(BACKGROUND_BLOCK);
extern s32 E_ID(BACKGROUND_GEARS);
extern s32 E_ID(BOSS_DOORS);
extern s32 E_ID(BOSS_DOOR_TRIGGER);
extern s32 E_ID(BREAKABLE_DEBRIS);
extern s32 E_ID(BREAKABLE_WALL);
extern s32 E_ID(BREAKABLE_WALL_PARTIAL);
extern s32 E_ID(BRIDGE_BACKGROUND_PIECE);
extern s32 E_ID(BRIDGE_TRIGGER);
extern s32 E_ID(CLOAKED_KNIGHT);
extern s32 E_ID(CLOAKED_KNIGHT_AURA);
extern s32 E_ID(CLOAKED_KNIGHT_CLOAK);
extern s32 E_ID(CLOAKED_KNIGHT_SWORD);
extern s32 E_ID(CLOUDS);
extern s32 E_ID(EXPLODE_PUFF_OPAQUE);
extern s32 E_ID(EXPLOSION_VARIANTS);
extern s32 E_ID(FLAIL_GUARD);
extern s32 E_ID(FLAIL_GUARD_FLAIL);
extern s32 E_ID(FLEA_ARMOR);
extern s32 E_ID(FLEA_ARMOR_ATTACK_HITBOX);
extern s32 E_ID(FLEA_MAN);
extern s32 E_ID(GEAR_HORIZONTAL);
extern s32 E_ID(GEAR_SIDEWAYS_LARGE);
extern s32 E_ID(GEAR_SIDEWAYS_SMALL);
extern s32 E_ID(GEAR_VERTICAL);
extern s32 E_ID(GREY_PUFF);
extern s32 E_ID(HARPY);
extern s32 E_ID(HARPY_DAGGER);
extern s32 E_ID(HARPY_FEATHER);
extern s32 E_ID(HARPY_FLAME);
extern s32 E_ID(HARPY_KICK);
extern s32 E_ID(KARASUMAN);
extern s32 E_ID(KARASUMAN_FEATHER);
extern s32 E_ID(KARASUMAN_FEATHER_ATTACK);
extern s32 E_ID(KARASUMAN_ORB_ATTACK);
extern s32 E_ID(KARASUMAN_RAVEN_ABSORB);
extern s32 E_ID(KARASUMAN_RAVEN_ATTACK);
extern s32 E_ID(LIFE_UP_SPAWN);
extern s32 E_ID(LOCK_CAMERA);
extern s32 E_ID(MEDUSA_HEAD_BLUE);
extern s32 E_ID(MEDUSA_HEAD_SPAWNER);
extern s32 E_ID(MEDUSA_HEAD_YELLOW);
extern s32 E_ID(PENDULUM_ANCHOR);
extern s32 E_ID(PENDULUM_BONE_CHAIN);
extern s32 E_ID(PENDULUM_WEIGHT);
extern s32 E_ID(PHANTOM_SKULL);
extern s32 E_ID(PHANTOM_SKULL_TRAIL);
extern s32 E_ID(ROOM_EXIT);
extern s32 E_ID(SECRET_AREA_DOOR);
extern s32 E_ID(SECRET_WALL_DEBRIS);
extern s32 E_ID(SIDE_WATER_SPLASH);
extern s32 E_ID(SKULL_LORD);
extern s32 E_ID(SKULL_LORD_FLAMES);
extern s32 E_ID(SKULL_LORD_OUTLINE);
extern s32 E_ID(SKULL_LORD_PIECES);
extern s32 E_ID(SMALL_WATER_DROP);
extern s32 E_ID(SPIKES);
extern s32 E_ID(SPIKES_DAMAGE);
extern s32 E_ID(SPIKES_DUST);
extern s32 E_ID(SPIKES_PARTS);
extern s32 E_ID(SPLASH_WATER);
extern s32 E_ID(SURFACING_WATER);
extern s32 E_ID(SWORD_LORD);
extern s32 E_ID(SWORD_LORD_ATTACK_HITBOX);
extern s32 E_ID(UNK_ID13);
extern s32 E_ID(VANDAL_SWORD);
extern s32 E_ID(VANDAL_SWORD_DEATH);
extern s32 E_ID(VANDAL_SWORD_HITBOX);
extern s32 E_ID(WALL_GEAR);
extern s32 E_ID(WATER_DROP);
extern s32 E_ID(WATER_FOREGROUND);

static void InitEntityIds(void) {
    E_ID(BACKGROUND_BLOCK) = 0x11;
    E_ID(LOCK_CAMERA) = 0x12;
    E_ID(UNK_ID13) = 0x13;
    E_ID(EXPLOSION_VARIANTS) = 0x14;
    E_ID(GREY_PUFF) = 0x15;
    E_ID(BRIDGE_TRIGGER) = 0x16;
    E_ID(EXPLODE_PUFF_OPAQUE) = 0x17;
    E_ID(CLOUDS) = 0x18;
    E_ID(BACKGROUND_GEARS) = 0x19;
    E_ID(GEAR_SIDEWAYS_LARGE) = 0x1A;
    E_ID(GEAR_HORIZONTAL) = 0x1B;
    E_ID(GEAR_VERTICAL) = 0x1C;
    E_ID(GEAR_SIDEWAYS_SMALL) = 0x1D;
    E_ID(WALL_GEAR) = 0x1E;
    E_ID(PENDULUM_ANCHOR) = 0x1F;
    E_ID(PENDULUM_BONE_CHAIN) = 0x20;
    E_ID(PENDULUM_WEIGHT) = 0x21;
    E_ID(BREAKABLE_WALL) = 0x22;
    E_ID(SECRET_WALL_DEBRIS) = 0x23;
    E_ID(ROOM_EXIT) = 0x24;
    E_ID(BREAKABLE_WALL_PARTIAL) = 0x25;
    E_ID(SECRET_AREA_DOOR) = 0x26;
    E_ID(WATER_FOREGROUND) = 0x27;
    E_ID(ALUCARD_WATER_EFFECT) = 0x28;
    E_ID(SPLASH_WATER) = 0x29;
    E_ID(SURFACING_WATER) = 0x2A;
    E_ID(SIDE_WATER_SPLASH) = 0x2B;
    E_ID(SMALL_WATER_DROP) = 0x2C;
    E_ID(WATER_DROP) = 0x2D;
    E_ID(SPIKES) = 0x2E;
    E_ID(SPIKES_PARTS) = 0x2F;
    E_ID(SPIKES_DUST) = 0x30;
    E_ID(SPIKES_DAMAGE) = 0x31;
    E_ID(SKULL_LORD) = 0x32;
    E_ID(SKULL_LORD_OUTLINE) = 0x33;
    E_ID(SKULL_LORD_FLAMES) = 0x34;
    E_ID(SKULL_LORD_PIECES) = 0x35;
    E_ID(HARPY) = 0x36;
    E_ID(HARPY_DAGGER) = 0x37;
    E_ID(HARPY_FLAME) = 0x38;
    E_ID(HARPY_KICK) = 0x39;
    E_ID(HARPY_FEATHER) = 0x3A;
    E_ID(CLOAKED_KNIGHT) = 0x3B;
    E_ID(CLOAKED_KNIGHT_CLOAK) = 0x3C;
    E_ID(CLOAKED_KNIGHT_SWORD) = 0x3D;
    E_ID(CLOAKED_KNIGHT_AURA) = 0x3E;
    E_ID(SWORD_LORD) = 0x3F;
    E_ID(SWORD_LORD_ATTACK_HITBOX) = 0x40;
    E_ID(VANDAL_SWORD) = 0x41;
    E_ID(VANDAL_SWORD_DEATH) = 0x42;
    E_ID(VANDAL_SWORD_HITBOX) = 0x43;
    E_ID(PHANTOM_SKULL) = 0x44;
    E_ID(PHANTOM_SKULL_TRAIL) = 0x45;
    E_ID(FLAIL_GUARD) = 0x46;
    E_ID(FLAIL_GUARD_FLAIL) = 0x47;
    E_ID(BRIDGE_BACKGROUND_PIECE) = 0x48;
    E_ID(FLEA_ARMOR) = 0x49;
    E_ID(FLEA_ARMOR_ATTACK_HITBOX) = 0x4A;
    E_ID(FLEA_MAN) = 0x4B;
    E_ID(BREAKABLE_DEBRIS) = 0x4C;
    E_ID(BOSS_DOOR_TRIGGER) = 0x4D;
    E_ID(BOSS_DOORS) = 0x4E;
    E_ID(KARASUMAN) = 0x4F;
    E_ID(KARASUMAN_FEATHER_ATTACK) = 0x50;
    E_ID(KARASUMAN_ORB_ATTACK) = 0x51;
    E_ID(KARASUMAN_RAVEN_ATTACK) = 0x52;
    E_ID(KARASUMAN_FEATHER) = 0x53;
    E_ID(KARASUMAN_RAVEN_ABSORB) = 0x54;
    E_ID(LIFE_UP_SPAWN) = 0x55;
    E_ID(MEDUSA_HEAD_SPAWNER) = 0x56;
    E_ID(MEDUSA_HEAD_BLUE) = 0x57;
    E_ID(MEDUSA_HEAD_YELLOW) = 0x58;
}

extern LayoutEntity* D_8D2E460;
extern LayoutEntity* D_8D2E534;
extern Overlay OVL_EXPORT(Overlay);

void OVL_EXPORT(Load)(void) {
    InitEntityIds();
    PfnEntityUpdates = OVL_EXPORT(EntityUpdates);
    g_pStObjLayoutHorizontal = &D_8D2E460;
    g_pStObjLayoutVertical = &D_8D2E534;
    func_892A018();
    memcpy(&g_api.o, &OVL_EXPORT(Overlay), sizeof(Overlay));
}
